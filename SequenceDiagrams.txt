@startuml
skinparam sequenceMessageAlign right

ユーザー -> スプレッドシート : 自宅情報を設定
opt ユーザーは「ON/OFF」ボタンを押す
    ユーザー -> line: エアコンの操作ON/OFF指示
    line -> Remo3: エアコンの操作指示
    Remo3 -> エアコン: 稼働の指示
    エアコン->エアコン:稼働状態の変更
    line -> line: 結果の送信
end

opt ユーザーは気温・室温ボタンを押す
    ユーザー -> line: ユーザーは「気温・室温」ボタンを押す
    Remo3 -> スプレッドシート: 気温・湿度の情報を記録
    スプレッドシート -> line:気温・湿度の文面を送信
    line -> line: 結果の送信
end

opt ユーザーは「帰宅」ボタンを押す
    ユーザー -> line: 「帰宅」ボタンを押す
    line -> スプレッドシート: スプレッドの実行指示

    loop 想定時間が0より小さいまで
        スプレッドシート -> スプレッドシート: 位置情報の取得
        スプレッドシート -> スプレッドシート: 想定時間、帰宅時間の計算
            alt 想定時間が0より小さい
                break
            end
    end   


end
    スプレッドシート -> Remo3: エアコンの操作指示
    Remo3 -> エアコン: 稼働の指示
    エアコン->エアコン:稼働する
    line -> line: 結果の送信
end

@enduml
